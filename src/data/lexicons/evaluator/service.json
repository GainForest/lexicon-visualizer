{
  "lexicon": 1,
  "id": "app.gainforest.evaluator.service",
  "description": "Declaration record published at rkey 'self' to register an account as an evaluator service.",
  "defs": {
    "main": {
      "type": "record",
      "description": "An evaluator service declaration.",
      "key": "literal:self",
      "record": {
        "type": "object",
        "required": ["policies", "createdAt"],
        "properties": {
          "policies": { "type": "ref", "ref": "#evaluatorPolicies", "description": "The evaluator's policies." },
          "createdAt": { "type": "string", "format": "datetime", "description": "Timestamp of when this evaluator service was declared." }
        }
      }
    },
    "evaluatorPolicies": {
      "type": "object",
      "description": "Policies declaring what this evaluator does and how it operates.",
      "required": ["evaluationTypes"],
      "properties": {
        "accessModel": { "type": "string", "maxGraphemes": 64, "knownValues": ["open","subscription"], "description": "Whether this evaluator requires user subscription or processes all matching records." },
        "evaluationTypes": { "type": "array", "items": { "type": "string", "maxGraphemes": 64 }, "maxLength": 20, "description": "List of evaluation type identifiers this evaluator produces." },
        "evaluationTypeDefinitions": { "type": "array", "items": { "type": "ref", "ref": "#evaluationTypeDefinition" }, "maxLength": 20, "description": "Detailed definitions for each evaluation type." },
        "subjectCollections": { "type": "array", "items": { "type": "string", "maxGraphemes": 128 }, "maxLength": 20, "description": "NSIDs of record collections this evaluator can evaluate." }
      }
    },
    "evaluationTypeDefinition": {
      "type": "object",
      "description": "Definition of a single evaluation type produced by this evaluator.",
      "required": ["identifier", "resultType"],
      "properties": {
        "identifier": { "type": "string", "maxGraphemes": 64, "description": "The evaluation type identifier." },
        "resultType": { "type": "string", "maxGraphemes": 128, "description": "The lexicon reference for the result type." },
        "method": { "type": "ref", "ref": "app.gainforest.evaluator.defs#methodInfo", "description": "Default method info for this evaluation type." },
        "locales": { "type": "array", "items": { "type": "ref", "ref": "#evaluationTypeLocale" }, "maxLength": 20, "description": "Human-readable names and descriptions in various languages." }
      }
    }
  }
}
