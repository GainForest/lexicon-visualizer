{
  "lexicon": 1,
  "id": "app.gainforest.organization.donation",
  "defs": {
    "main": {
      "type": "record",
      "description": "A record of a donation or financial transaction for financial transparency",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["amount", "currency", "donatedAt", "createdAt"],
        "properties": {
          "amount": { "type": "string", "description": "Donation amount as a string (e.g., '100.00')", "maxGraphemes": 32 },
          "currency": { "type": "string", "description": "Currency code (e.g., 'USD', 'EUR', 'CELO', 'SOL')", "maxGraphemes": 16 },
          "donatedAt": { "type": "string", "description": "When the donation was made", "format": "datetime" },
          "createdAt": { "type": "string", "description": "Record creation timestamp", "format": "datetime" },
          "donorName": { "type": "string", "description": "Donor name (may be anonymous)", "maxGraphemes": 256 },
          "donorDid": { "type": "string", "description": "Donor's ATProto DID if they have an account", "format": "did" },
          "recipientMemberRef": { "type": "string", "description": "AT-URI to the member record who received funds", "format": "at-uri" },
          "transactionType": { "type": "string", "description": "Type of transaction", "maxGraphemes": 32, "knownValues": ["fiat","crypto","grant","in-kind","other"] },
          "paymentMethod": { "type": "string", "description": "Payment method used for the donation", "maxGraphemes": 64, "knownValues": ["stripe","bank-transfer","celo","solana","ethereum","polygon","paypal","other"] },
          "transactionHash": { "type": "string", "description": "Blockchain transaction hash if crypto", "maxGraphemes": 256 },
          "blockchainNetwork": { "type": "string", "description": "Blockchain network the transaction was made on", "maxGraphemes": 32, "knownValues": ["celo","solana","ethereum","polygon","other"] },
          "purpose": { "type": "string", "description": "What the donation is for", "maxGraphemes": 512 },
          "isAnonymous": { "type": "boolean", "description": "Whether the donor wishes to remain anonymous" },
          "receiptUrl": { "type": "string", "description": "URL to donation receipt", "format": "uri", "maxGraphemes": 512 },
          "notes": { "type": "string", "description": "Additional notes", "maxGraphemes": 2048 },
          "amountUsd": { "type": "string", "description": "Equivalent amount in USD at time of donation", "maxGraphemes": 32 }
        }
      }
    }
  }
}
