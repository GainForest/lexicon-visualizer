{
  "lexicon": 1,
  "id": "app.gainforest.organization.layer",
  "defs": {
    "main": {
      "type": "record",
      "description": "A declaration of a layer for an organization",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["name", "type", "uri", "createdAt"],
        "properties": {
          "name": { "type": "string", "maxGraphemes": 256, "description": "The name of the layer" },
          "type": { "type": "string", "description": "The type of the layer", "enum": ["geojson_points","geojson_points_trees","geojson_line","choropleth","choropleth_shannon","raster_tif","tms_tile","heatmap","contour","satellite_overlay"] },
          "uri": { "type": "string", "format": "uri", "description": "The URI of the layer" },
          "description": { "type": "string", "maxGraphemes": 2048, "description": "The description of the layer" },
          "createdAt": { "type": "string", "description": "The date and time of the creation of the record", "format": "datetime" },
          "category": { "type": "string", "maxGraphemes": 128, "description": "Layer category for grouping in UI" },
          "displayOrder": { "type": "integer", "minimum": 0, "description": "Ordering priority for display" },
          "isDefault": { "type": "boolean", "description": "Whether this layer should be shown by default" },
          "opacity": { "type": "string", "maxGraphemes": 8, "description": "Default opacity (0-1 as string)" },
          "thumbnail": { "type": "ref", "ref": "app.gainforest.common.defs#imageThumbnail", "description": "Preview thumbnail for the layer" },
          "legend": { "type": "array", "maxLength": 20, "description": "Legend entries for the layer", "items": { "type": "ref", "ref": "#legendEntry" } },
          "colorScale": { "type": "string", "maxGraphemes": 64, "description": "Named color scale for continuous data", "knownValues": ["viridis","plasma","inferno","magma","cividis","turbo","spectral","rdylgn","rdylbu","custom"] },
          "unit": { "type": "string", "maxGraphemes": 64, "description": "Unit of measurement for the layer data" },
          "minValue": { "type": "string", "maxGraphemes": 32, "description": "Minimum value in the data range" },
          "maxValue": { "type": "string", "maxGraphemes": 32, "description": "Maximum value in the data range" },
          "tilePattern": { "type": "string", "maxGraphemes": 512, "description": "URL pattern for TMS tiles" },
          "tileMinZoom": { "type": "integer", "minimum": 0, "maximum": 22, "description": "Minimum zoom level" },
          "tileMaxZoom": { "type": "integer", "minimum": 0, "maximum": 22, "description": "Maximum zoom level" },
          "bounds": { "type": "string", "maxGraphemes": 128, "description": "Bounding box as 'west,south,east,north'" },
          "dataSource": { "type": "string", "maxGraphemes": 512, "description": "Attribution/source of the layer data" },
          "dataDate": { "type": "string", "maxGraphemes": 64, "description": "Date of the data (ISO 8601)" },
          "propertyKey": { "type": "string", "maxGraphemes": 128, "description": "GeoJSON property key to use for choropleth coloring" },
          "siteRef": { "type": "string", "format": "at-uri", "description": "AT-URI reference to the site this layer belongs to" }
        }
      }
    },
    "legendEntry": {
      "type": "object",
      "description": "A single entry in a layer legend",
      "required": ["label", "color"],
      "properties": {
        "label": { "type": "string", "maxGraphemes": 128, "description": "Display label for this legend entry" },
        "color": { "type": "string", "maxGraphemes": 16, "description": "Color for this legend entry" },
        "value": { "type": "string", "maxGraphemes": 64, "description": "Optional value associated with this legend entry" }
      }
    }
  }
}
